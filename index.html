<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>QR 자동 전송</title>
  <script>
    window.onload = function () {
      const fullPath = window.location.pathname; // 예: /scan/result/GD?A=0034
      const match = fullPath.match(/GD\?A=\d+/); // 정규식으로 GD?A=숫자 추출

      if (!match) {
        document.body.innerHTML = "<p>유효한 데이터가 없습니다.</p>";
        return;
      }

      const extractedData = match[0]; // "GD?A=0034"
      const scriptURL = "https://script.google.com/a/macros/taean-hs.es.kr/s/AKfycbzXir3IIx0SemD44nz2886bWd4NPnPhtjFyIIDxSU3ZErtU1b1BBSMQgWLFyIR9QgTE/exec?data=" + encodeURIComponent(extractedData);

      fetch(scriptURL)
        .then(res => res.text())
        .then(msg => {
          document.body.innerHTML = `<h2 style='font-size:24px;'>${msg}</h2>`;
        })
        .catch(err => {
          document.body.innerHTML = "<p>오류 발생: " + err + "</p>";
        });
    };
  </script>
</head>
<body>
  <p>QR 데이터 전송 중...</p>
</body>
</html>